import{aZ as le,aR as ce,n as S,t as b,p as L,a8 as ie,a7 as K,Z as re,X as p,b0 as ue,ao as U,r as B,c as E,d as _,g as H,h as r,b1 as V,A as P,x as de,i as R,q as Y,v as Z,y as F,a as I,e as fe,_ as ve,R as G,ad as me,aj as ye,T as he,M as ke,b2 as Ce,s as D,B as q,b3 as ge,ak as we,b4 as Oe,b5 as be,k as Ie,Y as Se,C as pe}from"./index-fe84b249.js";import{u as W}from"./use-expose-62bc051b.js";import{P as Pe,H as xe,I as X}from"./_plugin-vue_export-helper-cf0546ee.js";import{u as Te}from"./use-touch-6206199c.js";import{L as Be}from"./index-cad4f5d0.js";function ze(e,{args:t=[],done:o,canceled:a}){if(e){const n=e.apply(null,t);le(n)?n.then(s=>{s?o():a&&a()}).catch(ce):n?o():a&&a()}else o()}const J={show:Boolean,zIndex:S,overlay:b,duration:S,teleport:[String,Object],lockScroll:b,lazyRender:b,beforeClose:Function,overlayStyle:Object,overlayClass:L,transitionAppear:Boolean,closeOnClickOverlay:b},ct=Object.keys(J);let x=0;const N="van-overflow-hidden";function Le(e,t){const o=Te(),a="01",n="10",s=f=>{o.move(f);const i=o.deltaY.value>0?n:a,d=ue(f.target,e.value),{scrollHeight:h,offsetHeight:g,scrollTop:w}=d;let m="11";w===0?m=g>=h?"00":"01":w+g>=h&&(m="10"),m!=="11"&&o.isVertical()&&!(parseInt(m,2)&parseInt(i,2))&&U(f,!0)},l=()=>{document.addEventListener("touchstart",o.start),document.addEventListener("touchmove",s,{passive:!1}),x||document.body.classList.add(N),x++},u=()=>{x&&(document.removeEventListener("touchstart",o.start),document.removeEventListener("touchmove",s),x--,x||document.body.classList.remove(N))},y=()=>t()&&l(),v=()=>t()&&u();ie(y),K(v),re(v),p(t,f=>{f?l():u()})}function Q(e){const t=B(!1);return p(e,o=>{o&&(t.value=o)},{immediate:!0}),o=>()=>t.value?o():null}const[Ae,Ee]=E("overlay"),_e={show:Boolean,zIndex:S,duration:S,className:L,lockScroll:b,lazyRender:b,customStyle:Object};var Re=_({name:Ae,props:_e,setup(e,{slots:t}){const o=B(),a=Q(()=>e.show||!e.lazyRender),n=l=>{e.lockScroll&&U(l,!0)},s=a(()=>{var l;const u=P(de(e.zIndex),e.customStyle);return R(e.duration)&&(u.animationDuration=`${e.duration}s`),Y(r("div",{ref:o,style:u,class:[Ee(),e.className]},[(l=t.default)==null?void 0:l.call(t)]),[[Z,e.show]])});return H("touchmove",n,{target:o}),()=>r(V,{name:"van-fade",appear:!0},{default:s})}});const De=F(Re),Me=P({},J,{round:Boolean,position:I("center"),closeIcon:I("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:I("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[Ne,$]=E("popup");var $e=_({name:Ne,inheritAttrs:!1,props:Me,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:o,slots:a}){let n,s;const l=B(),u=B(),y=Q(()=>e.show||!e.lazyRender),v=fe(()=>{const c={zIndex:l.value};if(R(e.duration)){const k=e.position==="center"?"animationDuration":"transitionDuration";c[k]=`${e.duration}s`}return c}),f=()=>{n||(n=!0,l.value=e.zIndex!==void 0?+e.zIndex:Ce(),t("open"))},i=()=>{n&&ze(e.beforeClose,{done(){n=!1,t("close"),t("update:show",!1)}})},d=c=>{t("clickOverlay",c),e.closeOnClickOverlay&&i()},h=()=>{if(e.overlay)return r(De,{show:e.show,class:e.overlayClass,zIndex:l.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:d},{default:a["overlay-content"]})},g=c=>{t("clickCloseIcon",c),i()},w=()=>{if(e.closeable)return r(X,{role:"button",tabindex:0,name:e.closeIcon,class:[$("close-icon",e.closeIconPosition),xe],classPrefix:e.iconPrefix,onClick:g},null)};let m;const te=()=>{m&&clearTimeout(m),m=setTimeout(()=>{t("opened")})},oe=()=>t("closed"),ne=c=>t("keydown",c),ae=y(()=>{var c;const{round:k,position:z,safeAreaInsetTop:A,safeAreaInsetBottom:se}=e;return Y(r("div",D({ref:u,style:v.value,role:"dialog",tabindex:0,class:[$({round:k,[z]:z}),{"van-safe-area-top":A,"van-safe-area-bottom":se}],onKeydown:ne},o),[(c=a.default)==null?void 0:c.call(a),w()]),[[Z,e.show]])}),M=()=>{const{position:c,transition:k,transitionAppear:z}=e,A=c==="center"?"van-fade":`van-popup-slide-${c}`;return r(V,{name:k||A,appear:z,onAfterEnter:te,onAfterLeave:oe},{default:ae})};return p(()=>e.show,c=>{c&&!n&&(f(),o.tabindex===0&&ve(()=>{var k;(k=u.value)==null||k.focus()})),!c&&n&&(n=!1,t("close"))}),W({popupRef:u}),Le(u,()=>e.show&&e.lockScroll),H("popstate",()=>{e.closeOnPopstate&&(i(),s=!1)}),G(()=>{e.show&&f()}),me(()=>{s&&(t("update:show",!0),s=!1)}),K(()=>{e.show&&e.teleport&&(i(),s=!0)}),ye(Pe,()=>e.show),()=>e.teleport?r(he,{to:e.teleport},{default:()=>[h(),M()]}):r(ke,null,[h(),M()])}});const je=F($e);let Ke=0;function it(){const e=q(),{name:t="unknown"}=(e==null?void 0:e.type)||{};return`${t}-${++Ke}`}let T=0;function Ue(e){e?(T||document.body.classList.add("van-toast--unclickable"),T++):T&&(T--,T||document.body.classList.remove("van-toast--unclickable"))}const[He,O]=E("toast"),Ve=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],Ye={icon:String,show:Boolean,type:I("text"),overlay:Boolean,message:S,iconSize:S,duration:Oe(2e3),position:I("middle"),teleport:[String,Object],wordBreak:String,className:L,iconPrefix:String,transition:I("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:L,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var Ze=_({name:He,props:Ye,emits:["update:show"],setup(e,{emit:t,slots:o}){let a,n=!1;const s=()=>{const i=e.show&&e.forbidClick;n!==i&&(n=i,Ue(n))},l=i=>t("update:show",i),u=()=>{e.closeOnClick&&l(!1)},y=()=>clearTimeout(a),v=()=>{const{icon:i,type:d,iconSize:h,iconPrefix:g,loadingType:w}=e;if(i||d==="success"||d==="fail")return r(X,{name:i||d,size:h,class:O("icon"),classPrefix:g},null);if(d==="loading")return r(Be,{class:O("loading"),size:h,type:w},null)},f=()=>{const{type:i,message:d}=e;if(o.message)return r("div",{class:O("text")},[o.message()]);if(R(d)&&d!=="")return i==="html"?r("div",{key:0,class:O("text"),innerHTML:String(d)},null):r("div",{class:O("text")},[d])};return p(()=>[e.show,e.forbidClick],s),p(()=>[e.show,e.type,e.message,e.duration],()=>{y(),e.show&&e.duration>0&&(a=setTimeout(()=>{l(!1)},e.duration))}),G(s),ge(s),()=>r(je,D({class:[O([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:u,onClosed:y,"onUpdate:show":l},we(e,Ve)),{default:()=>[v(),f()]})}});function Fe(){const e=Ie({show:!1}),t=n=>{e.show=n},o=n=>{P(e,n,{transitionAppear:!0}),t(!0)},a=()=>t(!1);return W({open:o,close:a,toggle:t}),{open:o,close:a,state:e,toggle:t}}function Ge(e){const t=be(e),o=document.createElement("div");return document.body.appendChild(o),{instance:t.mount(o),unmount(){t.unmount(),document.body.removeChild(o)}}}const qe={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let C=[],We=!1,j=P({},qe);const Xe=new Map;function ee(e){return pe(e)?e:{message:e}}function Je(){const{instance:e,unmount:t}=Ge({setup(){const o=B(""),{open:a,state:n,close:s,toggle:l}=Fe(),u=()=>{},y=()=>r(Ze,D(n,{onClosed:u,"onUpdate:show":l}),null);return p(o,v=>{n.message=v}),q().render=y,{open:a,close:s,message:o}}});return e}function Qe(){if(!C.length||We){const e=Je();C.push(e)}return C[C.length-1]}function et(e={}){if(!Se)return{};const t=Qe(),o=ee(e);return t.open(P({},j,Xe.get(o.type||j.type),o)),t}const tt=e=>t=>et(P({type:e},ee(t))),rt=tt("loading"),ut=e=>{C.length&&(e?(C.forEach(t=>{t.close()}),C=[]):C[0].close())};export{je as P,ut as a,et as b,ze as c,Q as d,ct as e,J as p,rt as s,it as u};
