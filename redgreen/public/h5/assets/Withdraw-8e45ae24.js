import{D as M,am as D,r as g,k as U,E as b,F as W,G as _,H as s,h as r,aP as E,Q as L,a1 as Q,aM as $,J as x,I as p,U as w,q as F,aQ as B,V as I,M as S,aN as j,N as q}from"./index-8a75e505.js";import{N as z}from"./index-1845676f.js";import"./index-0486bf41.js";import{F as G}from"./index-eec30180.js";import{_ as R,I as T}from"./_plugin-vue_export-helper-380953b3.js";import{b as f,s as H,a as J}from"./function-call-aefc2bac.js";import{D as A}from"./index-a24eeb41.js";import{B as K}from"./index-ff09cbbc.js";import"./use-placeholder-178d2189.js";import"./use-expose-74a176f5.js";import"./use-touch-b10287a6.js";import"./index-19b9940a.js";const O="/h5/assets/withdrawal-cbbd6375.png",X="/h5/assets/withdrawal-39d67843.svg",Y="/h5/assets/withpass-1f7c591c.png";const Z={class:"name-field"},ee={class:"name-field"},se={class:"name-field"},oe={__name:"PaymentPassword",props:["username"],emits:["update"],setup(V,{expose:i,emit:k}){const c=V,{t:h}=M();D(),console.log("props",c);const o=g(!1),m=()=>{o.value=!0},t=U({password:"",newpassword:"",newpassword2:""}),v=()=>{if(!t.password){f({message:h("mine.oldpassword")});return}if(!t.newpassword||t.newpassword!==t.newpassword2){f({message:h("mine.newpassword")});return}E(t).then(n=>(f(n.msg),n.code!==0)).finally(()=>{setTimeout(()=>{o.value=!1},1e3)})};return i({showForm:m}),(n,e)=>{const a=T,d=G,u=A;return b(),W(u,{show:o.value,title:n.$t("next.paymentpassword"),"show-cancel-button":"","confirm-button-text":n.$t("win.confirm"),"cancel-button-text":n.$t("win.cancel"),"confirm-button-color":"#11a77c",onConfirm:v,onCancel:e[3]||(e[3]=l=>o.value=!1)},{default:_(()=>[s("div",Z,[r(d,{modelValue:t.password,"onUpdate:modelValue":e[0]||(e[0]=l=>t.password=l),type:"password",placeholder:n.$t("mine.oldpassword")},{"left-icon":_(()=>[r(a,{"class-prefix":"iconfont",name:"icon-password1"})]),_:1},8,["modelValue","placeholder"])]),s("div",ee,[r(d,{modelValue:t.newpassword,"onUpdate:modelValue":e[1]||(e[1]=l=>t.newpassword=l),type:"password",placeholder:n.$t("mine.newpassword")},{"left-icon":_(()=>[r(a,{"class-prefix":"iconfont",name:"icon-password1"})]),_:1},8,["modelValue","placeholder"])]),s("div",se,[r(d,{modelValue:t.newpassword2,"onUpdate:modelValue":e[2]||(e[2]=l=>t.newpassword2=l),type:"password",placeholder:n.$t("mine.newpassword")},{"left-icon":_(()=>[r(a,{"class-prefix":"iconfont",name:"icon-password1"})]),_:1},8,["modelValue","placeholder"])])]),_:1},8,["show","title","confirm-button-text","cancel-button-text"])}}},ae=R(oe,[["__scopeId","data-v-0c9a101d"]]);const te={class:"content-wrap"},ne={class:"head-wrap"},le={class:"balance"},re={class:"balance-text"},ie={class:"balance-value"},ce={class:"pic"},de=["src"],pe=["src"],me=["placeholder"],ue={key:0,class:"col"},we={key:1,class:"col"},_e={class:"inp"},fe={class:"line"},he={class:"title"},ve={style:{"padding-left":"0px"}},ye=["src"],ge=["placeholder"],be={class:"col"},$e={class:"note"},xe={__name:"Withdraw",setup(V){const i=L(),{t:k}=M(),c=U({service_charge:0,tax:0,lowMoney:0}),h=()=>history.back();Q(async()=>{i.info||i.getInfo();const e=await $({type:"service_charge"}),a=await $({type:"service_charge"}),d=await $({type:"reducemoneymin"});c.service_charge=e.data,c.tax=a.data,c.lowMoney=d.data});const o=g(),m=g(),t=()=>{var u;const e=Number(o.value),a=((u=i.info)==null?void 0:u.money)||0;if(e<c.lowMoney&&e>0||e>parseFloat(a))return f({message:$t("next.within")}),!1;if(!m.value)return f({message:k("next.payment")}),!1;const d={type:2,money:o.value,payment:m.value};H({overlay:!0}),j(d).then(l=>{J(),l.code===1&&(f({message:l.msg,type:"success"}),o.value="",m.value="",i.getInfo())})},v=g(),n=()=>{v.value.showForm()};return(e,a)=>{var N,P,C;const d=T,u=z,l=K;return b(),x(S,null,[r(u,{title:e.$t("next.withdraw"),"left-arrow":"",onClickLeft:h},{right:_(()=>[r(d,{size:"24","class-prefix":"iconfont",name:"icon-biaodanbianji",onClick:a[0]||(a[0]=y=>e.$router.push("/withdrawal-record"))})]),_:1},8,["title"]),s("div",te,[s("div",ne,[s("div",le,[s("div",null,[s("span",re,p(e.$t("home.balance"))+":",1),s("span",ie,p((N=w(i).info)==null?void 0:N.money),1)])]),s("div",ce,[s("img",{class:"pic1",src:w(O)},null,8,de),s("img",{class:"pic2",src:w(X)},null,8,pe),s("div",null,[s("p",null,[F(s("input",{"onUpdate:modelValue":a[1]||(a[1]=y=>o.value=y),type:"number",placeholder:e.$t("next.number")},null,8,me),[[B,o.value]])]),o.value?I("",!0):(b(),x("p",ue,p(e.$t("next.amount")),1)),o.value<100&&o.value>0||o.value>parseFloat((P=w(i).info)==null?void 0:P.money)?(b(),x("p",we,p(e.$t("next.within")),1)):I("",!0)])]),s("div",_e,[s("div",fe,[s("span",he,p(e.$t("next.password")),1),s("div",ve,[s("img",{class:"pos",src:w(Y)},null,8,ye),F(s("input",{type:"password","onUpdate:modelValue":a[2]||(a[2]=y=>m.value=y),placeholder:e.$t("next.payment")},null,8,ge),[[B,m.value]])])]),s("p",be,[s("span",{onClick:n},p(e.$t("next.paymentpassword")),1)])])]),s("p",$e,p(e.$t("wNote",[c.service_charge,c.tax,c.lowMoney])),1),r(l,{block:"",type:"primary",round:"",onClick:t},{default:_(()=>[q(p(e.$t("next.withdraw")),1)]),_:1}),r(ae,{username:(C=w(i).info)==null?void 0:C.email,ref_key:"elRef",ref:v},null,8,["username"])])],64)}}},De=R(xe,[["__scopeId","data-v-a2aa0e9c"]]);export{De as default};
