import{c as z,d as K,r as k,u as oe,t as F,h as d,y as O,A as X,l as se,e as M,n as ae,p as le,a as ie,k as H,x as re,ai as ce,z as de,ax as ue,ay as j,az as me,E as _,F as V,G as T,H as e,D as Y,ak as Q,$ as pe,J as B,S as I,I as c,N as $,U as P,M as fe,K as ve,L as ge}from"./index-7c2b3931.js";import{g as we}from"./_commonjsHelpers-725317a4.js";import"./index-66bf4a08.js";import{F as W}from"./index-ed084836.js";import{r as he,u as be,s as ye,b as _e,k as Ce,c as ke}from"./user-02900f6d.js";import{c as Be,d as $e,_ as L,I as Z}from"./_plugin-vue_export-helper-d9753a3e.js";import{p as xe,a as De,P as Se,c as Pe}from"./index-7047aa76.js";import{B as N}from"./index-f9e2e701.js";import{u as Te}from"./use-placeholder-6fc5606a.js";import{u as Ee}from"./use-expose-7cf3d07e.js";import{a as E,s as Re,c as Ue}from"./function-call-d2a53b5c.js";import"./use-id-bf35341c.js";import"./http-eade67d5.js";import"./use-touch-b4041db2.js";const[ee,q]=z("action-bar"),te=Symbol(ee),Ie={placeholder:Boolean,safeAreaInsetBottom:F};var Ae=K({name:ee,props:Ie,setup(n,{slots:a}){const o=k(),m=Te(o,q),{linkChildren:u}=oe(te);u();const g=()=>{var p;return d("div",{ref:o,class:[q(),{"van-safe-area-bottom":n.safeAreaInsetBottom}]},[(p=a.default)==null?void 0:p.call(a)])};return()=>n.placeholder?m(g):g()}});const Ve=O(Ae),[Fe,Ne]=z("action-bar-button"),ze=X({},he,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Ke=K({name:Fe,props:ze,setup(n,{slots:a}){const o=be(),{parent:m,index:u}=se(te),g=M(()=>{if(m){const l=m.children[u.value-1];return!(l&&"isButton"in l)}}),p=M(()=>{if(m){const l=m.children[u.value+1];return!(l&&"isButton"in l)}});return Ee({isButton:!0}),()=>{const{type:l,icon:i,text:w,color:r,loading:f,disabled:h}=n;return d(N,{class:Ne([l,{last:p.value,first:g.value}]),size:"large",type:l,icon:i,color:r,loading:f,disabled:h,onClick:o},{default:()=>[a.default?a.default():w]})}}});const G=O(Ke),[Oe,C,A]=z("dialog"),He=X({},xe,{title:String,theme:String,width:ae,message:[String,Function],callback:Function,allowHtml:Boolean,className:le,transition:ie("van-dialog-bounce"),messageAlign:String,closeOnPopstate:F,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:F,closeOnClickOverlay:Boolean}),Le=[...De,"transition","closeOnPopstate"];var Me=K({name:Oe,props:He,emits:["confirm","cancel","keydown","update:show"],setup(n,{emit:a,slots:o}){const m=k(),u=H({confirm:!1,cancel:!1}),g=t=>a("update:show",t),p=t=>{var s;g(!1),(s=n.callback)==null||s.call(n,t)},l=t=>()=>{n.show&&(a(t),n.beforeClose?(u[t]=!0,Pe(n.beforeClose,{args:[t],done(){p(t),u[t]=!1},canceled(){u[t]=!1}})):p(t))},i=l("cancel"),w=l("confirm"),r=ue(t=>{var s,y;if(t.target!==((y=(s=m.value)==null?void 0:s.popupRef)==null?void 0:y.value))return;({Enter:n.showConfirmButton?w:j,Escape:n.showCancelButton?i:j})[t.key](),a("keydown",t)},["enter","esc"]),f=()=>{const t=o.title?o.title():n.title;if(t)return d("div",{class:C("header",{isolated:!n.message&&!o.default})},[t])},h=t=>{const{message:s,allowHtml:y,messageAlign:v}=n,x=C("message",{"has-title":t,[v]:v}),U=me(s)?s():s;return y&&typeof U=="string"?d("div",{class:x,innerHTML:U},null):d("div",{class:x},[U])},D=()=>{if(o.default)return d("div",{class:C("content")},[o.default()]);const{title:t,message:s,allowHtml:y}=n;if(s){const v=!!(t||o.title);return d("div",{key:y?1:0,class:C("content",{isolated:!v})},[h(v)])}},S=()=>d("div",{class:[$e,C("footer")]},[n.showCancelButton&&d(N,{size:"large",text:n.cancelButtonText||A("cancel"),class:C("cancel"),style:{color:n.cancelButtonColor},loading:u.cancel,disabled:n.cancelButtonDisabled,onClick:i},null),n.showConfirmButton&&d(N,{size:"large",text:n.confirmButtonText||A("confirm"),class:[C("confirm"),{[Be]:n.showCancelButton}],style:{color:n.confirmButtonColor},loading:u.confirm,disabled:n.confirmButtonDisabled,onClick:w},null)]),b=()=>d(Ve,{class:C("footer")},{default:()=>[n.showCancelButton&&d(G,{type:"warning",text:n.cancelButtonText||A("cancel"),class:C("cancel"),color:n.cancelButtonColor,loading:u.cancel,disabled:n.cancelButtonDisabled,onClick:i},null),n.showConfirmButton&&d(G,{type:"danger",text:n.confirmButtonText||A("confirm"),class:C("confirm"),color:n.confirmButtonColor,loading:u.confirm,disabled:n.confirmButtonDisabled,onClick:w},null)]}),R=()=>o.footer?o.footer():n.theme==="round-button"?b():S();return()=>{const{width:t,title:s,theme:y,message:v,className:x}=n;return d(Se,re({ref:m,role:"dialog",class:[C([y]),x],style:{width:de(t)},tabindex:0,"aria-labelledby":s||v,onKeydown:r,"onUpdate:show":g},ce(n,Le)),{default:()=>[f(),D(),R()]})}}});const ne=O(Me);var je=function(){var n=document.getSelection();if(!n.rangeCount)return function(){};for(var a=document.activeElement,o=[],m=0;m<n.rangeCount;m++)o.push(n.getRangeAt(m));switch(a.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":a.blur();break;default:a=null;break}return n.removeAllRanges(),function(){n.type==="Caret"&&n.removeAllRanges(),n.rangeCount||o.forEach(function(u){n.addRange(u)}),a&&a.focus()}},qe=je,J={"text/plain":"Text","text/html":"Url",default:"Text"},Ge="Copy to clipboard: #{key}, Enter";function Je(n){var a=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return n.replace(/#{\s*key\s*}/g,a)}function Xe(n,a){var o,m,u,g,p,l,i=!1;a||(a={}),o=a.debug||!1;try{u=qe(),g=document.createRange(),p=document.getSelection(),l=document.createElement("span"),l.textContent=n,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",function(r){if(r.stopPropagation(),a.format)if(r.preventDefault(),typeof r.clipboardData>"u"){o&&console.warn("unable to use e.clipboardData"),o&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var f=J[a.format]||J.default;window.clipboardData.setData(f,n)}else r.clipboardData.clearData(),r.clipboardData.setData(a.format,n);a.onCopy&&(r.preventDefault(),a.onCopy(r.clipboardData))}),document.body.appendChild(l),g.selectNodeContents(l),p.addRange(g);var w=document.execCommand("copy");if(!w)throw new Error("copy command was unsuccessful");i=!0}catch(r){o&&console.error("unable to copy using execCommand: ",r),o&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(a.format||"text",n),a.onCopy&&a.onCopy(window.clipboardData),i=!0}catch(f){o&&console.error("unable to copy using clipboardData: ",f),o&&console.error("falling back to prompt"),m=Je("message"in a?a.message:Ge),window.prompt(m,n)}}finally{p&&(typeof p.removeRange=="function"?p.removeRange(g):p.removeAllRanges()),l&&document.body.removeChild(l),u()}return i}var Ye=Xe;const Qe=we(Ye);const We={class:"name-field"},Ze={__name:"Username",props:["username"],emits:["update"],setup(n,{expose:a,emit:o}){const m=n;console.log("props",m);const u=k(!1),g=()=>{u.value=!0},p=k(m.username);console.log(p.value);const l=()=>{ye({nickname:p.value}).then(i=>{(i==null?void 0:i.code)===1&&(E({message:i.msg}),o("update"))})};return a({showForm:g}),(i,w)=>{const r=W,f=ne;return _(),V(f,{show:u.value,"onUpdate:show":w[1]||(w[1]=h=>u.value=h),title:i.$t("mine.username"),"show-cancel-button":"","confirm-button-text":i.$t("win.confirm"),"cancel-button-text":i.$t("win.cancel"),"confirm-button-color":"#11a77c",onConfirm:l},{default:T(()=>[e("div",We,[d(r,{modelValue:p.value,"onUpdate:modelValue":w[0]||(w[0]=h=>p.value=h)},null,8,["modelValue"])])]),_:1},8,["show","title","confirm-button-text","cancel-button-text"])}}},et=L(Ze,[["__scopeId","data-v-2ee9c431"]]);const tt={class:"name-field"},nt={class:"name-field"},ot={class:"name-field"},st={class:"name-field"},at={__name:"Password",props:["username"],emits:["update"],setup(n,{expose:a,emit:o}){const m=n,{t:u}=Y(),g=Q();console.log("props",m);const p=k(!1),l=()=>{p.value=!0},i=H({password:"",newpassword:"",newpassword2:""}),w=()=>{if(!i.password){E({message:u("mine.oldpassword")});return}if(!i.newpassword||i.newpassword!==i.newpassword2){E({message:u("mine.newpassword")});return}_e(i).then(r=>r.code!==0?(E(r.msg),setTimeout(()=>{localStorage.removeItem("token"),g.push("/login")},1e3),!0):!1)};return a({showForm:l}),(r,f)=>{const h=W,D=Z,S=ne;return _(),V(S,{show:p.value,"onUpdate:show":f[4]||(f[4]=b=>p.value=b),title:r.$t("mine.password"),"show-cancel-button":"","confirm-button-text":r.$t("win.confirm"),"cancel-button-text":r.$t("win.cancel"),"confirm-button-color":"#11a77c",onConfirm:w},{default:T(()=>[e("div",tt,[d(h,{modelValue:m.username,"onUpdate:modelValue":f[0]||(f[0]=b=>m.username=b),readonly:""},null,8,["modelValue"])]),e("div",nt,[d(h,{modelValue:i.password,"onUpdate:modelValue":f[1]||(f[1]=b=>i.password=b),type:"password",placeholder:r.$t("mine.oldpassword")},{"left-icon":T(()=>[d(D,{"class-prefix":"iconfont",name:"icon-password1"})]),_:1},8,["modelValue","placeholder"])]),e("div",ot,[d(h,{modelValue:i.newpassword,"onUpdate:modelValue":f[2]||(f[2]=b=>i.newpassword=b),type:"password",placeholder:r.$t("mine.newpassword")},{"left-icon":T(()=>[d(D,{"class-prefix":"iconfont",name:"icon-password1"})]),_:1},8,["modelValue","placeholder"])]),e("div",st,[d(h,{modelValue:i.newpassword2,"onUpdate:modelValue":f[3]||(f[3]=b=>i.newpassword2=b),type:"password",placeholder:r.$t("mine.newpassword")},{"left-icon":T(()=>[d(D,{"class-prefix":"iconfont",name:"icon-password1"})]),_:1},8,["modelValue","placeholder"])])]),_:1},8,["show","title","confirm-button-text","cancel-button-text"])}}},lt=L(at,[["__scopeId","data-v-08d531ea"]]),it="/h5/assets/img_avatar100-038e8902.png",rt="/h5/assets/recharge-b6d3123c.png",ct="/h5/assets/withdrawal-cbbd6375.png",dt="/h5/assets/transactions-5fd58c58.png";const ut={class:"container-mine"},mt={class:"header bg"},pt={class:"info"},ft={class:"pic"},vt=["src"],gt={class:"name"},wt={key:0},ht={class:"right"},bt={class:"pass"},yt={class:"bottn bg"},_t=["src"],Ct=["src"],kt=["src"],Bt={key:0,class:"email bg"},$t={class:"wallet-addr flex-between"},xt={class:"promotion bg",style:{padding:"20px 0px"}},Dt={class:"promotionheader"},St={class:"leve"},Pt={class:"promotion-content-bom-wrap",style:{padding:"15px 10px"}},Tt={class:"promotion-level-wrap"},Et={class:"promotion-level-nav"},Rt=["onClick"],Ut={class:"people"},It={key:0,style:{color:"#0CC892"}},At={key:1,style:{color:"#0CC892"}},Vt={key:0,style:{color:"#0CC892"}},Ft={key:1,style:{color:"#0CC892"}},Nt={class:"email bg",style:{"margin-bottom":"0px","padding-bottom":"0px"}},zt={class:"wallet-addr flex-between"},Kt={key:0,class:"email bg",style:{"margin-bottom":"0px","padding-bottom":"0px"}},Ot={class:"wallet-addr flex-between"},Ht={class:"btton"},Lt={__name:"index",setup(n){const{t:a}=Y(),o=k({}),m=Q(),u=k(0),g=async t=>{Qe(t,{debug:!0,message:"Press #{key} to copy"}),E({message:a("mine.copy"),icon:"success"})},p=["level1","level2"],l=(t,s)=>{this.isActive.value=s},i=()=>{},w=()=>{},r=H({}),f=k(""),h=k(""),D=()=>{localStorage.removeItem("token"),m.push("/login")};pe(()=>{R(),Ce().then(t=>{var s;t.code===1&&(h.value=(s=t.data)==null?void 0:s.kefu_url)})});const S=k(),b=k(),R=()=>{Re({overlay:!0}),ke().then(t=>{o.value=t,t&&(f.value=window.location.href+"?invite_code="+t.verification)}).finally(()=>{Ue()})};return(t,s)=>{const y=Z;return _(),B("div",ut,[e("div",mt,[e("div",pt,[e("div",ft,[e("img",{src:I(it)},null,8,vt)]),e("div",gt,[e("p",null,[e("span",null,c(t.$t("mine.user")),1),$(" "+c(o.value.nickname),1)]),e("p",null,[e("span",null,[e("span",null,c(t.$t("mine.id")),1)]),$(" "+c(o.value.id),1)]),o.value.phone?(_(),B("p",wt,[e("span",null,c(t.$t("login.phone")),1),$(" "+c(o.value.phone),1)])):P("",!0),e("p",null,[e("span",null,c(t.$t("mine.email")),1),$(" "+c(o.value.email),1)])]),e("div",ht,[e("div",{class:"right_top",onClick:s[0]||(s[0]=v=>S.value.showForm())},[e("div",null,[d(y,{size:"20",name:"icon-biaodanbianji","class-prefix":"iconfont"})])]),e("div",{class:"right_bottom",onClick:s[1]||(s[1]=v=>g(o.value.id))},[e("div",null,[d(y,{size:"20",name:"icon-copy","class-prefix":"iconfont"})])])])]),e("p",bt,[e("span",{onClick:s[2]||(s[2]=v=>b.value.showForm())},c(t.$t("mine.password")),1)])]),e("div",yt,[e("div",{onClick:s[3]||(s[3]=v=>t.$router.push("/recharge"))},[e("img",{src:I(rt)},null,8,_t),e("span",null,c(t.$t("mine.recharge")),1)]),e("div",{onClick:s[4]||(s[4]=v=>t.$router.push("/withdrawal"))},[e("img",{src:I(ct)},null,8,Ct),e("span",null,c(t.$t("mine.withdrawal")),1)]),e("div",{onClick:s[5]||(s[5]=v=>t.$router.push("/bank"))},[e("img",{src:I(dt)},null,8,kt),e("span",null,c(t.$t("mine.card")),1)])]),h.value?(_(),B("div",Bt,[e("p",null,[$(c(t.$t("mine.customer"))+" ",1),e("span",{onClick:s[6]||(s[6]=(...v)=>t.useinstruction&&t.useinstruction(...v))},c(t.$t("next.use")),1)]),e("div",$t,[$(c(h.value)+" ",1),d(y,{size:"20",name:"icon-copy","class-prefix":"iconfont"})])])):P("",!0),e("div",xt,[e("div",Dt,[e("div",null,[$(c(t.$t("mine.promotion"))+" ",1),e("span",{class:"question",onClick:s[7]||(s[7]=v=>t.$router.push("illustrate"))},"?")]),e("span",{onClick:s[8]||(s[8]=v=>t.$router.push("/report"))},"...")]),e("div",St,[e("div",Pt,[e("div",Tt,[e("div",Et,[(_(),B(fe,null,ve(p,(v,x)=>e("div",{onClick:U=>l(v,x),class:ge([{"level-text-active":u.value==x},"level-text"])},c(t.$t("mine.level"))+" "+c(x+1),11,Rt)),64))])])]),e("div",Ut,[e("div",{class:"left",onClick:i},[e("p",null,c(t.$t("mine.people")),1),r.users?(_(),B("span",It,c(r.users),1)):(_(),B("span",At,"0"))]),e("div",{class:"left",onClick:w},[e("p",null,c(t.$t("mine.contribution")),1),r.contribution?(_(),B("span",Vt,c(r.contribution),1)):(_(),B("span",Ft,"0"))])])]),e("div",Nt,[e("p",null,c(t.$t("mine.code")),1),e("div",zt,[$(c(o.value.verification)+" ",1),d(y,{size:"20",name:"icon-copy","class-prefix":"iconfont",onClick:s[9]||(s[9]=v=>g(o.value.verification))})])]),f.value?(_(),B("div",Kt,[e("p",null,c(t.$t("mine.link")),1),e("div",Ot,[$(c(f.value)+" ",1),d(y,{size:"20",name:"icon-copy","class-prefix":"iconfont",onClick:s[10]||(s[10]=v=>g(f.value))})])])):P("",!0)]),e("div",Ht,[e("div",{class:"submit-button",onClick:D},[e("p",null,c(t.$t("mine.logout")),1)])]),o.value.nickname?(_(),V(et,{key:1,ref_key:"nameRef",ref:S,onUpdate:R,username:o.value.nickname},null,8,["username"])):P("",!0),o.value.email?(_(),V(lt,{key:2,ref_key:"passRef",ref:b,username:o.value.email},null,8,["username"])):P("",!0)])}}},sn=L(Lt,[["__scopeId","data-v-b6be45b0"]]);export{sn as default};
