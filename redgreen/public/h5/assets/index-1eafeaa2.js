import{r as h,E as v,F,G as U,H as e,h as f,D as A,ak as z,k as H,$ as K,e as q,J as $,S as E,I as i,N as k,U as D,M as G,K as J,L as X}from"./index-e9887b11.js";import{g as O}from"./_commonjsHelpers-725317a4.js";import{s as Q,b as W,k as Y,d as Z,p as ee}from"./user-9ba2d881.js";import{a as V,F as B,s as oe,c as te}from"./index-511b3e64.js";import{_ as P,I as L}from"./_plugin-vue_export-helper-551d2503.js";import{D as M}from"./index-bb38f28e.js";import"./http-d6b7bb6c.js";import"./use-id-59a053d7.js";import"./use-expose-cc51fab9.js";import"./use-touch-e44ec860.js";import"./index-9b87e129.js";import"./use-placeholder-0c85cdf7.js";var ne=function(){var c=document.getSelection();if(!c.rangeCount)return function(){};for(var n=document.activeElement,s=[],p=0;p<c.rangeCount;p++)s.push(c.getRangeAt(p));switch(n.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":n.blur();break;default:n=null;break}return c.removeAllRanges(),function(){c.type==="Caret"&&c.removeAllRanges(),c.rangeCount||s.forEach(function(m){c.addRange(m)}),n&&n.focus()}},se=ne,N={"text/plain":"Text","text/html":"Url",default:"Text"},ae="Copy to clipboard: #{key}, Enter";function le(c){var n=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return c.replace(/#{\s*key\s*}/g,n)}function ie(c,n){var s,p,m,w,u,r,a=!1;n||(n={}),s=n.debug||!1;try{m=se(),w=document.createRange(),u=document.getSelection(),r=document.createElement("span"),r.textContent=c,r.ariaHidden="true",r.style.all="unset",r.style.position="fixed",r.style.top=0,r.style.clip="rect(0, 0, 0, 0)",r.style.whiteSpace="pre",r.style.webkitUserSelect="text",r.style.MozUserSelect="text",r.style.msUserSelect="text",r.style.userSelect="text",r.addEventListener("copy",function(l){if(l.stopPropagation(),n.format)if(l.preventDefault(),typeof l.clipboardData>"u"){s&&console.warn("unable to use e.clipboardData"),s&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var d=N[n.format]||N.default;window.clipboardData.setData(d,c)}else l.clipboardData.clearData(),l.clipboardData.setData(n.format,c);n.onCopy&&(l.preventDefault(),n.onCopy(l.clipboardData))}),document.body.appendChild(r),w.selectNodeContents(r),u.addRange(w);var y=document.execCommand("copy");if(!y)throw new Error("copy command was unsuccessful");a=!0}catch(l){s&&console.error("unable to copy using execCommand: ",l),s&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(n.format||"text",c),n.onCopy&&n.onCopy(window.clipboardData),a=!0}catch(d){s&&console.error("unable to copy using clipboardData: ",d),s&&console.error("falling back to prompt"),p=le("message"in n?n.message:ae),window.prompt(p,c)}}finally{u&&(typeof u.removeRange=="function"?u.removeRange(w):u.removeAllRanges()),r&&document.body.removeChild(r),m()}return a}var re=ie;const ce=O(re);const de={class:"name-field"},ue={__name:"Username",props:["username"],emits:["update"],setup(c,{expose:n,emit:s}){const p=c;console.log("props",p);const m=h(!1),w=()=>{m.value=!0},u=h(p.username);console.log(u.value);const r=()=>{Q({nickname:u.value}).then(a=>{(a==null?void 0:a.code)===1&&(V({message:a.msg}),s("update"))})};return n({showForm:w}),(a,y)=>{const l=B,d=M;return v(),F(d,{show:m.value,"onUpdate:show":y[1]||(y[1]=b=>m.value=b),title:a.$t("mine.username"),"show-cancel-button":"","confirm-button-text":a.$t("win.confirm"),"cancel-button-text":a.$t("win.cancel"),"confirm-button-color":"#11a77c",onConfirm:r},{default:U(()=>[e("div",de,[f(l,{modelValue:u.value,"onUpdate:modelValue":y[0]||(y[0]=b=>u.value=b)},null,8,["modelValue"])])]),_:1},8,["show","title","confirm-button-text","cancel-button-text"])}}},pe=P(ue,[["__scopeId","data-v-2ee9c431"]]);const me={class:"name-field"},ve={class:"name-field"},fe={class:"name-field"},we={class:"name-field"},_e={__name:"Password",props:["username"],emits:["update"],setup(c,{expose:n,emit:s}){const p=c,{t:m}=A(),w=z();console.log("props",p);const u=h(!1),r=()=>{u.value=!0},a=H({password:"",newpassword:"",newpassword2:""}),y=()=>{if(!a.password){V({message:m("mine.oldpassword")});return}if(!a.newpassword||a.newpassword!==a.newpassword2){V({message:m("mine.newpassword")});return}W(a).then(l=>l.code!==0?(V(l.msg),setTimeout(()=>{localStorage.removeItem("token"),w.push("/login")},1e3),!0):!1)};return n({showForm:r}),(l,d)=>{const b=B,C=L,I=M;return v(),F(I,{show:u.value,"onUpdate:show":d[4]||(d[4]=_=>u.value=_),title:l.$t("mine.password"),"show-cancel-button":"","confirm-button-text":l.$t("win.confirm"),"cancel-button-text":l.$t("win.cancel"),"confirm-button-color":"#11a77c",onConfirm:y},{default:U(()=>[e("div",me,[f(b,{modelValue:p.username,"onUpdate:modelValue":d[0]||(d[0]=_=>p.username=_),readonly:""},null,8,["modelValue"])]),e("div",ve,[f(b,{modelValue:a.password,"onUpdate:modelValue":d[1]||(d[1]=_=>a.password=_),type:"password",placeholder:l.$t("mine.oldpassword")},{"left-icon":U(()=>[f(C,{"class-prefix":"iconfont",name:"icon-password1"})]),_:1},8,["modelValue","placeholder"])]),e("div",fe,[f(b,{modelValue:a.newpassword,"onUpdate:modelValue":d[2]||(d[2]=_=>a.newpassword=_),type:"password",placeholder:l.$t("mine.newpassword")},{"left-icon":U(()=>[f(C,{"class-prefix":"iconfont",name:"icon-password1"})]),_:1},8,["modelValue","placeholder"])]),e("div",we,[f(b,{modelValue:a.newpassword2,"onUpdate:modelValue":d[3]||(d[3]=_=>a.newpassword2=_),type:"password",placeholder:l.$t("mine.newpassword")},{"left-icon":U(()=>[f(C,{"class-prefix":"iconfont",name:"icon-password1"})]),_:1},8,["modelValue","placeholder"])])]),_:1},8,["show","title","confirm-button-text","cancel-button-text"])}}},ge=P(_e,[["__scopeId","data-v-08d531ea"]]),ye="/h5/assets/img_avatar100-038e8902.png",be="/h5/assets/recharge-b6d3123c.png",he="/h5/assets/withdrawal-cbbd6375.png",$e="/h5/assets/transactions-5fd58c58.png";const ke={class:"container-mine"},Ce={class:"header bg"},xe={class:"info"},De={class:"pic"},Ue=["src"],Ve={class:"name"},Ie={key:0},Re={class:"right"},Ee={class:"pass"},Fe={class:"bottn bg"},Se=["src"],Te=["src"],Pe=["src"],Ne={key:0,class:"email bg"},Ae={class:"wallet-addr flex-between"},ze={class:"promotion bg",style:{padding:"20px 0px"}},Be={class:"promotionheader"},Le={class:"leve"},Me={class:"promotion-content-bom-wrap",style:{padding:"15px 10px"}},je={class:"promotion-level-wrap"},He={class:"promotion-level-nav"},Ke=["onClick"],qe={class:"people"},Ge={key:0,style:{color:"#0CC892"}},Je={key:1,style:{color:"#0CC892"}},Xe={key:0,style:{color:"#0CC892"}},Oe={key:1,style:{color:"#0CC892"}},Qe={class:"email bg",style:{"margin-bottom":"0px","padding-bottom":"0px"}},We={class:"wallet-addr flex-between"},Ye={key:0,class:"email bg",style:{"margin-bottom":"0px","padding-bottom":"0px"}},Ze={class:"wallet-addr flex-between"},eo={class:"btton"},oo={__name:"index",setup(c){const{t:n}=A(),s=h({}),p=z(),m=h(0),w=async o=>{ce(o,{debug:!0,message:"Press #{key} to copy"}),V({message:n("mine.copy"),icon:"success"})},u=["level1","level2"],r=(o,t)=>{m.value=t},a=()=>{},y=()=>{},l=h(""),d=h(""),b=()=>{localStorage.removeItem("token"),p.push("/login")};K(()=>{_(),Y().then(o=>{var t;o.code===1&&(d.value=(t=o.data)==null?void 0:t.kefu_url)}),j()});const C=h(),I=h(),_=()=>{oe({overlay:!0}),Z().then(o=>{s.value=o,o&&(l.value=window.location.href+"?invite_code="+o.verification)}).finally(()=>{te()})},S=h({}),j=()=>{ee({tt:"day"}).then(o=>{o.code===1&&(S.value=o.data)})},R=q(()=>{const o=m.value+1,t={users:S.value[`inviter${o}_count`],contribution:S.value[`Contribution${o}`]};return console.log(t),t});return(o,t)=>{const x=L;return v(),$("div",ke,[e("div",Ce,[e("div",xe,[e("div",De,[e("img",{src:E(ye)},null,8,Ue)]),e("div",Ve,[e("p",null,[e("span",null,i(o.$t("mine.user")),1),k(" "+i(s.value.nickname),1)]),e("p",null,[e("span",null,[e("span",null,i(o.$t("mine.id")),1)]),k(" "+i(s.value.id),1)]),s.value.phone?(v(),$("p",Ie,[e("span",null,i(o.$t("login.phone")),1),k(" "+i(s.value.phone),1)])):D("",!0),e("p",null,[e("span",null,i(o.$t("mine.email")),1),k(" "+i(s.value.email),1)])]),e("div",Re,[e("div",{class:"right_top",onClick:t[0]||(t[0]=g=>C.value.showForm())},[e("div",null,[f(x,{size:"20",name:"icon-biaodanbianji","class-prefix":"iconfont"})])]),e("div",{class:"right_bottom",onClick:t[1]||(t[1]=g=>w(s.value.id))},[e("div",null,[f(x,{size:"20",name:"icon-copy","class-prefix":"iconfont"})])])])]),e("p",Ee,[e("span",{onClick:t[2]||(t[2]=g=>I.value.showForm())},i(o.$t("mine.password")),1)])]),e("div",Fe,[e("div",{onClick:t[3]||(t[3]=g=>o.$router.push("/recharge"))},[e("img",{src:E(be)},null,8,Se),e("span",null,i(o.$t("mine.recharge")),1)]),e("div",{onClick:t[4]||(t[4]=g=>o.$router.push("/withdrawal"))},[e("img",{src:E(he)},null,8,Te),e("span",null,i(o.$t("mine.withdrawal")),1)]),e("div",{onClick:t[5]||(t[5]=g=>o.$router.push("/bank"))},[e("img",{src:E($e)},null,8,Pe),e("span",null,i(o.$t("mine.card")),1)])]),d.value?(v(),$("div",Ne,[e("p",null,i(o.$t("mine.customer"))+" ",1),e("div",Ae,[k(i(d.value)+" ",1),f(x,{size:"20",name:"icon-copy","class-prefix":"iconfont"})])])):D("",!0),e("div",ze,[e("div",Be,[e("div",null,[k(i(o.$t("mine.promotion"))+" ",1),e("span",{class:"question",onClick:t[6]||(t[6]=g=>o.$router.push("illustrate"))},"?")]),e("span",{onClick:t[7]||(t[7]=g=>o.$router.push("/report"))},"...")]),e("div",Le,[e("div",Me,[e("div",je,[e("div",He,[(v(),$(G,null,J(u,(g,T)=>e("div",{onClick:to=>r(g,T),class:X([{"level-text-active":m.value==T},"level-text"])},i(o.$t("mine.level"))+" "+i(T+1),11,Ke)),64))])])]),e("div",qe,[e("div",{class:"left",onClick:a},[e("p",null,i(o.$t("mine.people")),1),R.value.users?(v(),$("span",Ge,i(R.value.users),1)):(v(),$("span",Je,"0"))]),e("div",{class:"left",onClick:y},[e("p",null,i(o.$t("mine.contribution")),1),R.value.contribution?(v(),$("span",Xe,i(R.value.contribution),1)):(v(),$("span",Oe,"0"))])])]),e("div",Qe,[e("p",null,i(o.$t("mine.code")),1),e("div",We,[k(i(s.value.verification)+" ",1),f(x,{size:"20",name:"icon-copy","class-prefix":"iconfont",onClick:t[8]||(t[8]=g=>w(s.value.verification))})])]),l.value?(v(),$("div",Ye,[e("p",null,i(o.$t("mine.link")),1),e("div",Ze,[k(i(l.value)+" ",1),f(x,{size:"20",name:"icon-copy","class-prefix":"iconfont",onClick:t[9]||(t[9]=g=>w(l.value))})])])):D("",!0)]),e("div",eo,[e("div",{class:"submit-button",onClick:b},[e("p",null,i(o.$t("mine.logout")),1)])]),s.value.nickname?(v(),F(pe,{key:1,ref_key:"nameRef",ref:C,onUpdate:_,username:s.value.nickname},null,8,["username"])):D("",!0),s.value.email?(v(),F(ge,{key:2,ref_key:"passRef",ref:I,username:s.value.email},null,8,["username"])):D("",!0)])}}},wo=P(oo,[["__scopeId","data-v-0f89cbc5"]]);export{wo as default};
