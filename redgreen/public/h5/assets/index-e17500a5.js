import{r as h,E as f,F,G as U,H as e,h as w,D as A,ak as z,k as H,$ as K,e as q,J as $,S as E,I as a,N as k,U as x,M as G,K as J,L as X}from"./index-a76ee34d.js";import{g as O}from"./_commonjsHelpers-725317a4.js";import{s as Q,b as W,k as Y,d as Z,p as ee}from"./user-e8209e15.js";import{a as V,F as B,s as oe,c as te}from"./index-6a9f4c3c.js";import{_ as P,I as L}from"./_plugin-vue_export-helper-1e07be8f.js";import{D as M}from"./index-ef16ed35.js";import"./http-921e1080.js";import"./use-id-d3946d26.js";import"./use-expose-f24e194a.js";import"./use-touch-24e3c7a8.js";import"./index-cb9c67db.js";import"./use-placeholder-64908429.js";var ne=function(){var c=document.getSelection();if(!c.rangeCount)return function(){};for(var n=document.activeElement,s=[],p=0;p<c.rangeCount;p++)s.push(c.getRangeAt(p));switch(n.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":n.blur();break;default:n=null;break}return c.removeAllRanges(),function(){c.type==="Caret"&&c.removeAllRanges(),c.rangeCount||s.forEach(function(m){c.addRange(m)}),n&&n.focus()}},se=ne,N={"text/plain":"Text","text/html":"Url",default:"Text"},ae="Copy to clipboard: #{key}, Enter";function le(c){var n=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return c.replace(/#{\s*key\s*}/g,n)}function ie(c,n){var s,p,m,g,u,r,l=!1;n||(n={}),s=n.debug||!1;try{m=se(),g=document.createRange(),u=document.getSelection(),r=document.createElement("span"),r.textContent=c,r.ariaHidden="true",r.style.all="unset",r.style.position="fixed",r.style.top=0,r.style.clip="rect(0, 0, 0, 0)",r.style.whiteSpace="pre",r.style.webkitUserSelect="text",r.style.MozUserSelect="text",r.style.msUserSelect="text",r.style.userSelect="text",r.addEventListener("copy",function(i){if(i.stopPropagation(),n.format)if(i.preventDefault(),typeof i.clipboardData>"u"){s&&console.warn("unable to use e.clipboardData"),s&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var d=N[n.format]||N.default;window.clipboardData.setData(d,c)}else i.clipboardData.clearData(),i.clipboardData.setData(n.format,c);n.onCopy&&(i.preventDefault(),n.onCopy(i.clipboardData))}),document.body.appendChild(r),g.selectNodeContents(r),u.addRange(g);var y=document.execCommand("copy");if(!y)throw new Error("copy command was unsuccessful");l=!0}catch(i){s&&console.error("unable to copy using execCommand: ",i),s&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(n.format||"text",c),n.onCopy&&n.onCopy(window.clipboardData),l=!0}catch(d){s&&console.error("unable to copy using clipboardData: ",d),s&&console.error("falling back to prompt"),p=le("message"in n?n.message:ae),window.prompt(p,c)}}finally{u&&(typeof u.removeRange=="function"?u.removeRange(g):u.removeAllRanges()),r&&document.body.removeChild(r),m()}return l}var re=ie;const ce=O(re);const de={class:"name-field"},ue={__name:"Username",props:["username"],emits:["update"],setup(c,{expose:n,emit:s}){const p=c;console.log("props",p);const m=h(!1),g=()=>{m.value=!0},u=h(p.username);console.log(u.value);const r=()=>{Q({nickname:u.value}).then(l=>{(l==null?void 0:l.code)===1&&(V({message:l.msg}),s("update"))})};return n({showForm:g}),(l,y)=>{const i=B,d=M;return f(),F(d,{show:m.value,"onUpdate:show":y[1]||(y[1]=b=>m.value=b),title:l.$t("mine.username"),"show-cancel-button":"","confirm-button-text":l.$t("win.confirm"),"cancel-button-text":l.$t("win.cancel"),"confirm-button-color":"#11a77c",onConfirm:r},{default:U(()=>[e("div",de,[w(i,{modelValue:u.value,"onUpdate:modelValue":y[0]||(y[0]=b=>u.value=b)},null,8,["modelValue"])])]),_:1},8,["show","title","confirm-button-text","cancel-button-text"])}}},pe=P(ue,[["__scopeId","data-v-2ee9c431"]]);const me={class:"name-field"},ve={class:"name-field"},fe={class:"name-field"},we={class:"name-field"},ge={__name:"Password",props:["username"],emits:["update"],setup(c,{expose:n,emit:s}){const p=c,{t:m}=A(),g=z();console.log("props",p);const u=h(!1),r=()=>{u.value=!0},l=H({password:"",newpassword:"",newpassword2:""}),y=()=>{if(!l.password){V({message:m("mine.oldpassword")});return}if(!l.newpassword||l.newpassword!==l.newpassword2){V({message:m("mine.newpassword")});return}W(l).then(i=>i.code!==0?(V(i.msg),setTimeout(()=>{localStorage.removeItem("token"),g.push("/login")},1e3),!0):!1)};return n({showForm:r}),(i,d)=>{const b=B,C=L,I=M;return f(),F(I,{show:u.value,"onUpdate:show":d[4]||(d[4]=_=>u.value=_),title:i.$t("mine.password"),"show-cancel-button":"","confirm-button-text":i.$t("win.confirm"),"cancel-button-text":i.$t("win.cancel"),"confirm-button-color":"#11a77c",onConfirm:y},{default:U(()=>[e("div",me,[w(b,{modelValue:p.username,"onUpdate:modelValue":d[0]||(d[0]=_=>p.username=_),readonly:""},null,8,["modelValue"])]),e("div",ve,[w(b,{modelValue:l.password,"onUpdate:modelValue":d[1]||(d[1]=_=>l.password=_),type:"password",placeholder:i.$t("mine.oldpassword")},{"left-icon":U(()=>[w(C,{"class-prefix":"iconfont",name:"icon-password1"})]),_:1},8,["modelValue","placeholder"])]),e("div",fe,[w(b,{modelValue:l.newpassword,"onUpdate:modelValue":d[2]||(d[2]=_=>l.newpassword=_),type:"password",placeholder:i.$t("mine.newpassword")},{"left-icon":U(()=>[w(C,{"class-prefix":"iconfont",name:"icon-password1"})]),_:1},8,["modelValue","placeholder"])]),e("div",we,[w(b,{modelValue:l.newpassword2,"onUpdate:modelValue":d[3]||(d[3]=_=>l.newpassword2=_),type:"password",placeholder:i.$t("mine.newpassword")},{"left-icon":U(()=>[w(C,{"class-prefix":"iconfont",name:"icon-password1"})]),_:1},8,["modelValue","placeholder"])])]),_:1},8,["show","title","confirm-button-text","cancel-button-text"])}}},_e=P(ge,[["__scopeId","data-v-08d531ea"]]),ye="/h5/assets/img_avatar100-038e8902.png",be="/h5/assets/recharge-b6d3123c.png",he="/h5/assets/withdrawal-cbbd6375.png",$e="/h5/assets/transactions-5fd58c58.png";const ke={class:"container-mine"},Ce={class:"header bg"},De={class:"info"},xe={class:"pic"},Ue=["src"],Ve={class:"name"},Ie={key:0},Re={class:"right"},Ee={class:"pass"},Fe={class:"bottn bg"},Se=["src"],Te=["src"],Pe=["src"],Ne={key:0,class:"email bg"},Ae={class:"wallet-addr flex-between"},ze={class:"promotion bg",style:{padding:"20px 0px"}},Be={class:"promotionheader"},Le={class:"leve"},Me={class:"promotion-content-bom-wrap",style:{padding:"15px 10px"}},je={class:"promotion-level-wrap"},He={class:"promotion-level-nav"},Ke=["onClick"],qe={class:"people"},Ge={key:0,style:{color:"#0CC892"}},Je={key:1,style:{color:"#0CC892"}},Xe={key:0,style:{color:"#0CC892"}},Oe={key:1,style:{color:"#0CC892"}},Qe={class:"email bg",style:{"margin-bottom":"0px","padding-bottom":"0px"}},We={class:"wallet-addr flex-between"},Ye={key:0,class:"email bg",style:{"margin-bottom":"0px","padding-bottom":"0px"}},Ze={class:"wallet-addr flex-between"},eo={class:"btton"},oo={__name:"index",setup(c){const{t:n}=A(),s=h({}),p=z(),m=h(0),g=async o=>{ce(o,{debug:!0,message:"Press #{key} to copy"}),V({message:n("mine.copy"),icon:"success"})},u=["level1","level2"],r=(o,t)=>{m.value=t},l=()=>{},y=()=>{},i=h(""),d=h(""),b=()=>{localStorage.removeItem("token"),p.push("/login")};K(()=>{_(),Y().then(o=>{var t;o.code===1&&(d.value=(t=o.data)==null?void 0:t.kefu_url)}),j()});const C=h(),I=h(),_=()=>{oe({overlay:!0}),Z().then(o=>{s.value=o,o&&(i.value=window.location.href+"?invite_code="+o.verification)}).finally(()=>{te()})},S=h({}),j=()=>{ee({tt:"day"}).then(o=>{o.code===1&&(S.value=o.data)})},R=q(()=>{const o=m.value+1,t={users:S.value[`inviter${o}_count`],contribution:S.value[`Contribution${o}`]};return console.log(t),t});return(o,t)=>{const D=L;return f(),$("div",ke,[e("div",Ce,[e("div",De,[e("div",xe,[e("img",{src:E(ye)},null,8,Ue)]),e("div",Ve,[e("p",null,[e("span",null,a(o.$t("mine.user")),1),k(" "+a(s.value.nickname),1)]),e("p",null,[e("span",null,[e("span",null,a(o.$t("mine.id")),1)]),k(" "+a(s.value.id),1)]),s.value.phone?(f(),$("p",Ie,[e("span",null,a(o.$t("login.phone")),1),k(" "+a(s.value.phone),1)])):x("",!0),e("p",null,[e("span",null,a(o.$t("mine.email")),1),k(" "+a(s.value.email),1)])]),e("div",Re,[e("div",{class:"right_top",onClick:t[0]||(t[0]=v=>C.value.showForm())},[e("div",null,[w(D,{size:"20",name:"icon-biaodanbianji","class-prefix":"iconfont"})])]),e("div",{class:"right_bottom",onClick:t[1]||(t[1]=v=>g(s.value.id))},[e("div",null,[w(D,{size:"20",name:"icon-copy","class-prefix":"iconfont"})])])])]),e("p",Ee,[e("span",{onClick:t[2]||(t[2]=v=>I.value.showForm())},a(o.$t("mine.password")),1)])]),e("div",Fe,[e("div",{onClick:t[3]||(t[3]=v=>o.$router.push("/recharge"))},[e("img",{src:E(be)},null,8,Se),e("span",null,a(o.$t("mine.recharge")),1)]),e("div",{onClick:t[4]||(t[4]=v=>o.$router.push("/withdrawal"))},[e("img",{src:E(he)},null,8,Te),e("span",null,a(o.$t("mine.withdrawal")),1)]),e("div",{onClick:t[5]||(t[5]=v=>o.$router.push("/bank"))},[e("img",{src:E($e)},null,8,Pe),e("span",null,a(o.$t("mine.card")),1)])]),d.value?(f(),$("div",Ne,[e("p",null,[k(a(o.$t("mine.customer"))+" ",1),e("span",{onClick:t[6]||(t[6]=(...v)=>o.useinstruction&&o.useinstruction(...v))},a(o.$t("next.use")),1)]),e("div",Ae,[k(a(d.value)+" ",1),w(D,{size:"20",name:"icon-copy","class-prefix":"iconfont"})])])):x("",!0),e("div",ze,[e("div",Be,[e("div",null,[k(a(o.$t("mine.promotion"))+" ",1),e("span",{class:"question",onClick:t[7]||(t[7]=v=>o.$router.push("illustrate"))},"?")]),e("span",{onClick:t[8]||(t[8]=v=>o.$router.push("/report"))},"...")]),e("div",Le,[e("div",Me,[e("div",je,[e("div",He,[(f(),$(G,null,J(u,(v,T)=>e("div",{onClick:to=>r(v,T),class:X([{"level-text-active":m.value==T},"level-text"])},a(o.$t("mine.level"))+" "+a(T+1),11,Ke)),64))])])]),e("div",qe,[e("div",{class:"left",onClick:l},[e("p",null,a(o.$t("mine.people")),1),R.value.users?(f(),$("span",Ge,a(R.value.users),1)):(f(),$("span",Je,"0"))]),e("div",{class:"left",onClick:y},[e("p",null,a(o.$t("mine.contribution")),1),R.value.contribution?(f(),$("span",Xe,a(R.value.contribution),1)):(f(),$("span",Oe,"0"))])])]),e("div",Qe,[e("p",null,a(o.$t("mine.code")),1),e("div",We,[k(a(s.value.verification)+" ",1),w(D,{size:"20",name:"icon-copy","class-prefix":"iconfont",onClick:t[9]||(t[9]=v=>g(s.value.verification))})])]),i.value?(f(),$("div",Ye,[e("p",null,a(o.$t("mine.link")),1),e("div",Ze,[k(a(i.value)+" ",1),w(D,{size:"20",name:"icon-copy","class-prefix":"iconfont",onClick:t[10]||(t[10]=v=>g(i.value))})])])):x("",!0)]),e("div",eo,[e("div",{class:"submit-button",onClick:b},[e("p",null,a(o.$t("mine.logout")),1)])]),s.value.nickname?(f(),F(pe,{key:1,ref_key:"nameRef",ref:C,onUpdate:_,username:s.value.nickname},null,8,["username"])):x("",!0),s.value.email?(f(),F(_e,{key:2,ref_key:"passRef",ref:I,username:s.value.email},null,8,["username"])):x("",!0)])}}},wo=P(oo,[["__scopeId","data-v-2a5b3713"]]);export{wo as default};
