import{c as M,d as R,e as D,h as s,M as S,ak as K,al as O,y as j,D as q,a5 as G,r as y,k as H,E as w,J as A,H as d,G as g,F as B,I as f,U as J,S as P,N as b}from"./index-fd6e4a9e.js";import{C as x}from"./index-5e26d108.js";import"./index-bc9394a8.js";import{O as Q,L as W}from"./index-9ded0b1f.js";import{F as X}from"./index-d5bfe80e.js";import{T as Y,a as Z}from"./index-f21d4f3d.js";import"./index-f24a79b2.js";import{N as ee}from"./index-725103a9.js";import{A as ae}from"./AreaSelect-c161d257.js";import{l as oe}from"./user-a9bc9c33.js";import{_ as te}from"./_plugin-vue_export-helper-c27b6911.js";import{a as C}from"./function-call-34b4e906.js";import{I as ne}from"./index-d40ec26d.js";import{B as se}from"./index-471d9afd.js";import"./use-touch-713ff978.js";import"./use-placeholder-67f351ca.js";import"./index-66304568.js";import"./http-ae412820.js";const[I,le]=M("space"),re={align:String,direction:{type:String,default:"horizontal"},size:{type:[Number,String,Array],default:8},wrap:Boolean,fill:Boolean};function N(o=[]){const r=[];return o.forEach(t=>{Array.isArray(t)?r.push(...t):t.type===S?r.push(...N(t.children)):r.push(t)}),r.filter(t=>{var c;return!(t&&(t.type===K||t.type===S&&((c=t.children)==null?void 0:c.length)===0||t.type===O&&t.children.trim()===""))})}var ie=R({name:I,props:re,setup(o,{slots:r}){const t=D(()=>{var a;return(a=o.align)!=null?a:o.direction==="horizontal"?"center":""}),c=a=>typeof a=="number"?a+"px":a,m=a=>{const i={},p=`${c(Array.isArray(o.size)?o.size[0]:o.size)}`,u=`${c(Array.isArray(o.size)?o.size[1]:o.size)}`;return a?o.wrap?{marginBottom:u}:{}:(o.direction==="horizontal"&&(i.marginRight=p),(o.direction==="vertical"||o.wrap)&&(i.marginBottom=u),i)};return()=>{var a;const i=N((a=r.default)==null?void 0:a.call(r));return s("div",{class:[le({[o.direction]:o.direction,[`align-${t.value}`]:t.value,wrap:o.wrap,fill:o.fill})]},[i.map((p,u)=>s("div",{key:`item-${u}`,class:`${I}-item`,style:m(u===i.length-1)},[p]))])}}});const me=j(ie);const ue={class:"container"},de={class:"field-wrap"},ce={class:"value"},pe={class:"field-wrap"},ve={class:"links"},ge={class:"loading"},fe={__name:"Login",setup(o){const{t:r}=q(),t=G(),c=()=>history.back(),m=y(0),a=H({username:"",password:""}),i=y({areaCodes:null,dialCode:"1",iso2:"us",name:"United States",priority:0}),p=y(!0),u=y(!1),k=y(!1),U=()=>{u.value=!0},L=()=>{if(!a.username){let e=r("login.inpemail");m.value===1&&(e=r("login.phonenum")),C({message:e});return}if(!a.password){C({message:r("login.inppass")});return}k.value=!0,oe(a).then(e=>{k.value=!1,console.log("/api/users/login",e);const{access_token:n,token:$}=e;localStorage.setItem("token",$);let v="emailvalue",_="emailpass";m.value===1&&(v="phonevalue",_="phonepass"),p.value===!0?(localStorage.setItem(v,a.username),localStorage.setItem(_,a.password)):(localStorage.removeItem(v),localStorage.removeItem(_)),t.push({path:"/"})}).catch(e=>{console.log(e),C({message:e.msg})})};return(e,n)=>{const $=ee,v=Z,_=Y,h=ne,V=X,T=x,z=se,F=W,E=Q;return w(),A(S,null,[s($,{title:e.$t("login.login"),"left-arrow":"",onClickLeft:c},null,8,["title"]),d("div",ue,[s(_,{type:"card",active:m.value,"onUpdate:active":n[0]||(n[0]=l=>m.value=l)},{default:g(()=>[s(v,{title:e.$t("login.email")},null,8,["title"]),s(v,{title:e.$t("login.phone")},null,8,["title"])]),_:1},8,["active"]),d("div",de,[m.value===0?(w(),B(h,{key:0,size:"20","class-prefix":"iconfont",name:"icon-youjian"})):(w(),B(h,{key:1,size:"20","class-prefix":"iconfont",name:"icon-mobile"})),m.value===1?(w(),A("div",{key:2,class:"area",onClick:U},[d("div",ce,"+"+f(i.value.dialCode),1),s(h,{name:"arrow-down"})])):J("",!0),s(V,{modelValue:a.username,"onUpdate:modelValue":n[1]||(n[1]=l=>a.username=l),placeholder:m.value===0?e.$t("login.inpemail"):e.$t("login.phonenum")},null,8,["modelValue","placeholder"])]),d("div",pe,[s(h,{size:"20","class-prefix":"iconfont",name:"icon-password"}),s(V,{type:"password",modelValue:a.password,"onUpdate:modelValue":n[2]||(n[2]=l=>a.password=l),placeholder:e.$t("login.inppass")},null,8,["modelValue","placeholder"])]),s(T,{class:"remember",shape:"square",modelValue:p.value,"onUpdate:modelValue":n[3]||(n[3]=l=>p.value=l)},{default:g(()=>[b(f(e.$t("login.rempass")),1)]),_:1},8,["modelValue"]),s(P(me),{direction:"vertical",size:20},{default:g(()=>[s(z,{type:"primary",block:"",round:"",onClick:L},{default:g(()=>[b(f(e.$t("login.login")),1)]),_:1}),s(z,{type:"primary",block:"",round:""},{default:g(()=>[b(f(e.$t("home.trys")),1)]),_:1})]),_:1}),d("div",ve,[d("span",{onClick:n[4]||(n[4]=l=>e.$router.push({path:"/register"}))},f(e.$t("login.register")),1),d("span",{onClick:n[5]||(n[5]=l=>e.$router.push({path:"/forget"}))},f(e.$t("login.forget")),1)])]),s(ae,{show:u.value,"onUpdate:show":n[6]||(n[6]=l=>u.value=l),code:i.value,"onUpdate:code":n[7]||(n[7]=l=>i.value=l)},null,8,["show","code"]),s(E,{show:k.value},{default:g(()=>[d("div",ge,[s(F,{type:"spinner"})])]),_:1},8,["show"])],64)}}},Fe=te(fe,[["__scopeId","data-v-27274d51"]]);export{Fe as default};
