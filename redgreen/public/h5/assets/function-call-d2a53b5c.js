import{c as T,d as I,V as v,Q as M,aM as N,h as c,x as O,ai as L,a as k,n as C,ar as z,p as w,i as j,aN as A,k as E,A as g,W as U,C as V,r as q,B as D}from"./index-7c2b3931.js";import{u as H}from"./use-expose-7cf3d07e.js";import{I as Q}from"./_plugin-vue_export-helper-d9753a3e.js";import{P as W}from"./index-7047aa76.js";import{L as _}from"./user-02900f6d.js";let f=0;function F(e){e?(f||document.body.classList.add("van-toast--unclickable"),f++):f&&(f--,f||document.body.classList.remove("van-toast--unclickable"))}const[G,r]=T("toast"),J=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],K={icon:String,show:Boolean,type:k("text"),overlay:Boolean,message:C,iconSize:C,duration:z(2e3),position:k("middle"),teleport:[String,Object],wordBreak:String,className:w,iconPrefix:String,transition:k("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:w,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var R=I({name:G,props:K,emits:["update:show"],setup(e,{emit:t,slots:o}){let l,n=!1;const u=()=>{const s=e.show&&e.forbidClick;n!==s&&(n=s,F(n))},d=s=>t("update:show",s),y=()=>{e.closeOnClick&&d(!1)},m=()=>clearTimeout(l),p=()=>{const{icon:s,type:a,iconSize:h,iconPrefix:x,loadingType:B}=e;if(s||a==="success"||a==="fail")return c(Q,{name:s||a,size:h,class:r("icon"),classPrefix:x},null);if(a==="loading")return c(_,{class:r("loading"),size:h,type:B},null)},P=()=>{const{type:s,message:a}=e;if(o.message)return c("div",{class:r("text")},[o.message()]);if(j(a)&&a!=="")return s==="html"?c("div",{key:0,class:r("text"),innerHTML:String(a)},null):c("div",{class:r("text")},[a])};return v(()=>[e.show,e.forbidClick],u),v(()=>[e.show,e.type,e.message,e.duration],()=>{m(),e.show&&e.duration>0&&(l=setTimeout(()=>{d(!1)},e.duration))}),M(u),N(u),()=>c(W,O({class:[r([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:y,onClosed:m,"onUpdate:show":d},L(e,J)),{default:()=>[p(),P()]})}});function X(){const e=E({show:!1}),t=n=>{e.show=n},o=n=>{g(e,n,{transitionAppear:!0}),t(!0)},l=()=>t(!1);return H({open:o,close:l,toggle:t}),{open:o,close:l,state:e,toggle:t}}function Y(e){const t=A(e),o=document.createElement("div");return document.body.appendChild(o),{instance:t.mount(o),unmount(){t.unmount(),document.body.removeChild(o)}}}const Z={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let i=[],$=!1,b=g({},Z);const ee=new Map;function S(e){return V(e)?e:{message:e}}function te(){const{instance:e,unmount:t}=Y({setup(){const o=q(""),{open:l,state:n,close:u,toggle:d}=X(),y=()=>{},m=()=>c(R,O(n,{onClosed:y,"onUpdate:show":d}),null);return v(o,p=>{n.message=p}),D().render=m,{open:l,close:u,message:o}}});return e}function oe(){if(!i.length||$){const e=te();i.push(e)}return i[i.length-1]}function ne(e={}){if(!U)return{};const t=oe(),o=S(e);return t.open(g({},b,ee.get(o.type||b.type),o)),t}const se=e=>t=>ne(g({type:e},S(t))),de=se("loading"),fe=e=>{i.length&&(e?(i.forEach(t=>{t.close()}),i=[]):i[0].close())};export{ne as a,fe as c,de as s};
