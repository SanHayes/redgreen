import{D as M,ak as T,r as g,k as U,E as $,F as S,G as _,H as s,h as r,$ as W,J as b,I as p,S as w,s as P,aD as B,U as I,M as j,N as E}from"./index-a76ee34d.js";import{N as L}from"./index-17bcf195.js";import{j as z,g as x,h as G}from"./user-e8209e15.js";import{u as H}from"./user-ec2e01e6.js";import{a as f,F as J,s as q,c as A}from"./index-6a9f4c3c.js";import{_ as D,I as R}from"./_plugin-vue_export-helper-1e07be8f.js";import{D as K}from"./index-ef16ed35.js";import{B as O}from"./index-cb9c67db.js";import"./use-placeholder-64908429.js";import"./http-921e1080.js";import"./use-id-d3946d26.js";import"./use-expose-f24e194a.js";import"./use-touch-24e3c7a8.js";const Q="/h5/assets/withdrawal-cbbd6375.png",X="/h5/assets/withdrawal-39d67843.svg",Y="/h5/assets/withpass-1f7c591c.png";const Z={class:"name-field"},ee={class:"name-field"},se={class:"name-field"},oe={__name:"PaymentPassword",props:["username"],emits:["update"],setup(k,{expose:i,emit:V}){const c=k,{t:h}=M();T(),console.log("props",c);const o=g(!1),m=()=>{o.value=!0},a=U({password:"",newpassword:"",newpassword2:""}),v=()=>{if(!a.password){f({message:h("mine.oldpassword")});return}if(!a.newpassword||a.newpassword!==a.newpassword2){f({message:h("mine.newpassword")});return}z(a).then(n=>(f(n.msg),n.code!==0)).finally(()=>{setTimeout(()=>{o.value=!1},1e3)})};return i({showForm:m}),(n,e)=>{const t=R,d=J,u=K;return $(),S(u,{show:o.value,title:n.$t("next.paymentpassword"),"show-cancel-button":"","confirm-button-text":n.$t("win.confirm"),"cancel-button-text":n.$t("win.cancel"),"confirm-button-color":"#11a77c",onConfirm:v,onCancel:e[3]||(e[3]=l=>o.value=!1)},{default:_(()=>[s("div",Z,[r(d,{modelValue:a.password,"onUpdate:modelValue":e[0]||(e[0]=l=>a.password=l),type:"password",placeholder:n.$t("mine.oldpassword")},{"left-icon":_(()=>[r(t,{"class-prefix":"iconfont",name:"icon-password1"})]),_:1},8,["modelValue","placeholder"])]),s("div",ee,[r(d,{modelValue:a.newpassword,"onUpdate:modelValue":e[1]||(e[1]=l=>a.newpassword=l),type:"password",placeholder:n.$t("mine.newpassword")},{"left-icon":_(()=>[r(t,{"class-prefix":"iconfont",name:"icon-password1"})]),_:1},8,["modelValue","placeholder"])]),s("div",se,[r(d,{modelValue:a.newpassword2,"onUpdate:modelValue":e[2]||(e[2]=l=>a.newpassword2=l),type:"password",placeholder:n.$t("mine.newpassword")},{"left-icon":_(()=>[r(t,{"class-prefix":"iconfont",name:"icon-password1"})]),_:1},8,["modelValue","placeholder"])])]),_:1},8,["show","title","confirm-button-text","cancel-button-text"])}}},te=D(oe,[["__scopeId","data-v-0c9a101d"]]);const ae={class:"content-wrap"},ne={class:"head-wrap"},le={class:"balance"},re={class:"balance-text"},ie={class:"balance-value"},ce={class:"pic"},de=["src"],pe=["src"],me=["placeholder"],ue={key:0,class:"col"},we={key:1,class:"col"},_e={class:"inp"},fe={class:"line"},he={class:"title"},ve={style:{"padding-left":"0px"}},ye=["src"],ge=["placeholder"],$e={class:"col"},be={class:"note"},xe={__name:"Withdraw",setup(k){const i=H(),{t:V}=M(),c=U({service_charge:0,tax:0,lowMoney:0}),h=()=>history.back();W(async()=>{i.info||i.getInfo();const e=await x({type:"service_charge"}),t=await x({type:"service_charge"}),d=await x({type:"reducemoneymin"});c.service_charge=e.data,c.tax=t.data,c.lowMoney=d.data});const o=g(),m=g(),a=()=>{var u;const e=Number(o.value),t=((u=i.info)==null?void 0:u.money)||0;if(e<c.lowMoney&&e>0||e>parseFloat(t))return f({message:$t("next.within")}),!1;if(!m.value)return f({message:V("next.payment")}),!1;const d={type:2,money:o.value,payment:m.value};q({overlay:!0}),G(d).then(l=>{A(),l.code===1&&(f({message:l.msg,type:"success"}),o.value="",m.value="",i.getInfo())})},v=g(),n=()=>{v.value.showForm()};return(e,t)=>{var C,F,N;const d=R,u=L,l=O;return $(),b(j,null,[r(u,{title:e.$t("next.withdraw"),"left-arrow":"",onClickLeft:h},{right:_(()=>[r(d,{size:"24","class-prefix":"iconfont",name:"icon-biaodanbianji",onClick:t[0]||(t[0]=y=>e.$router.push("/withdrawal-record"))})]),_:1},8,["title"]),s("div",ae,[s("div",ne,[s("div",le,[s("div",null,[s("span",re,p(e.$t("home.balance"))+":",1),s("span",ie,p((C=w(i).info)==null?void 0:C.money),1)])]),s("div",ce,[s("img",{class:"pic1",src:w(Q)},null,8,de),s("img",{class:"pic2",src:w(X)},null,8,pe),s("div",null,[s("p",null,[P(s("input",{"onUpdate:modelValue":t[1]||(t[1]=y=>o.value=y),type:"number",placeholder:e.$t("next.number")},null,8,me),[[B,o.value]])]),o.value?I("",!0):($(),b("p",ue,p(e.$t("next.amount")),1)),o.value<100&&o.value>0||o.value>parseFloat((F=w(i).info)==null?void 0:F.money)?($(),b("p",we,p(e.$t("next.within")),1)):I("",!0)])]),s("div",_e,[s("div",fe,[s("span",he,p(e.$t("next.password")),1),s("div",ve,[s("img",{class:"pos",src:w(Y)},null,8,ye),P(s("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=y=>m.value=y),placeholder:e.$t("next.payment")},null,8,ge),[[B,m.value]])])]),s("p",$e,[s("span",{onClick:n},p(e.$t("next.paymentpassword")),1)])])]),s("p",be,p(e.$t("wNote",[c.service_charge,c.tax,c.lowMoney])),1),r(l,{block:"",type:"primary",round:"",onClick:a},{default:_(()=>[E(p(e.$t("next.withdraw")),1)]),_:1}),r(te,{username:(N=w(i).info)==null?void 0:N.email,ref_key:"elRef",ref:v},null,8,["username"])])],64)}}},Se=D(xe,[["__scopeId","data-v-a2aa0e9c"]]);export{Se as default};
